<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#030712">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <title>CELESTIA INVESTING PRO</title>
    <style>
        :root { --brand: #7B2BF9; --brand-light: #A855F7; --accent: #FF26B9; }
        body { font-family: 'Inter', sans-serif; background-color: #030712; color: #f3f4f6; overflow-x: hidden; padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); -webkit-tap-highlight-color: transparent; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .glass-hover:hover { background: rgba(255, 255, 255, 0.06); border: 1px solid rgba(123, 43, 249, 0.4); transition: all 0.3s ease; }
        .text-gradient { background: linear-gradient(135deg, #fff 0%, #9ca3af 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .brand-gradient { background: linear-gradient(90deg, var(--brand) 0%, var(--accent) 100%); }
        .glow-purple { box-shadow: 0 0 40px -10px rgba(123, 43, 249, 0.3); }
        .loading-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .detail-content { max-height: 0; opacity: 0; overflow: hidden; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .item-active .detail-content { max-height: 120px; opacity: 1; margin-top: 8px; }
        .item-active .chevron { transition: transform 0.3s ease; }
        .item-active .chevron { transform: rotate(180deg); }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="relative z-10 max-w-7xl mx-auto px-5 py-8">
        
        <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-6">
            <div>
                <div class="flex items-center gap-3 mb-2">
                    <span class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
                    <span class="text-[10px] mono uppercase tracking-[0.4em] text-purple-400 font-bold">Live Investment Protocol</span>
                </div>
                <h1 class="text-4xl md:text-7xl font-black tracking-tighter uppercase text-gradient">CELESTIA<br/>INVESTING</h1>
            </div>
            
            <div class="flex items-center gap-3">
                <a href="https://celestia.org" target="_blank" class="glass glass-hover w-12 h-12 rounded-full flex items-center justify-center transition-all active:scale-90" title="Official Website">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9-9c1.657 0 3 4.03 3 9s-1.343 9-3 9m0-18c-1.657 0-3 4.03-3 9s1.343 9 3 9m-9-9h18"></path></svg>
                </a>
                <a href="https://x.com/Celestia" target="_blank" class="glass glass-hover w-12 h-12 rounded-full flex items-center justify-center transition-all active:scale-90" title="Twitter (X)">
                    <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>
                </a>
                <button onclick="fetchData()" class="glass glass-hover px-6 py-3 rounded-full flex items-center gap-3 active:scale-95 transition-all ml-2">
                    <svg id="refresh-icon" class="w-4 h-4" fill="none" stroke="white" viewBox="0 0 24 24"><path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-width="2.5"></path></svg>
                    <span class="mono text-[10px] uppercase tracking-widest font-bold">Refresh Data</span>
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-12">
            <div class="md:col-span-7 glass rounded-3xl p-7 border-l-4 border-l-purple-500 flex flex-col justify-center">
                <div class="flex items-center gap-3 mb-3">
                    <span class="text-[10px] mono text-purple-400 font-bold uppercase tracking-widest">Staking Wallet</span>
                    <span class="text-[9px] px-2 py-0.5 rounded-md bg-purple-500/20 text-purple-300 font-bold mono">VERIFIED ADDR</span>
                </div>
                <div class="flex flex-col">
                    <p class="text-[9px] mono text-gray-500 uppercase font-bold mb-1">Total Staked Balance</p>
                    <p id="my-staked" class="text-4xl font-black text-white tracking-tighter">0.00 TIA</p>
                    <p class="mono text-[10px] text-gray-600 mt-2 truncate">celestia1rgf4z0qljnsaq2tt5dzr058snqahfkha0007wc</p>
                </div>
            </div>
            
            <div class="md:col-span-5 glass rounded-3xl p-7 flex flex-col justify-center items-center text-center bg-gradient-to-br from-purple-900/20 to-transparent border-purple-500/30 glow-purple">
                <p class="text-[9px] mono text-purple-300 uppercase font-bold mb-1 tracking-widest">Estimated Assets (USD)</p>
                <p id="my-value" class="text-5xl font-black tracking-tighter text-gradient leading-none">$0.00</p>
                <div class="mt-4 flex items-center gap-2">
                    <div class="flex items-center gap-1.5 px-2 py-1 rounded-md bg-white/5 border border-white/10">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                        <p id="live-calc-info" class="text-[9px] text-gray-400 mono font-bold uppercase">Live Calculation</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-12 gap-5 mb-12">
            <div class="md:col-span-4 glass rounded-[2.5rem] p-7 glow-purple" id="migration-list"></div>
            
            <div class="md:col-span-8 space-y-5">
                <div class="glass rounded-[2.5rem] p-7 border-l-4 border-l-purple-600">
                    <h3 class="text-purple-400 mono text-[10px] uppercase tracking-widest mb-4 font-bold">02. WHY MIGRATE DATA ON-CHAIN?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-1">
                            <p class="text-[11px] font-black text-white">ğŸ”’ ì‹ ë¢°ì˜ ìë™í™” (Trustless System)</p>
                            <p class="text-[10px] text-gray-400 leading-relaxed font-medium">ê´€ë¦¬ìì˜ ì„ ì˜ì— ê¸°ëŒ€ì§€ ì•Šê³ , ìˆ˜í•™ì  í•©ì˜ë¥¼ í†µí•´ ë°ì´í„°ì˜ ì§„ì‹¤ì„±ì„ ë‹´ë³´í•©ë‹ˆë‹¤.</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[11px] font-black text-white">ğŸ› ï¸ ìˆ˜ì • ë¶ˆê°€ëŠ¥í•œ ê¸°ë¡ (Immutability)</p>
                            <p class="text-[10px] text-gray-400 leading-relaxed font-medium">í•œ ë²ˆ ê¸°ë¡ëœ ë°ì´í„°ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡°ì‘í•  ìˆ˜ ì—†ì–´ ë¬´ê²°ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[11px] font-black text-white">ğŸŒ ì˜êµ¬ì  ë°ì´í„° ì£¼ê¶Œ (Data Sovereignty)</p>
                            <p class="text-[10px] text-gray-400 leading-relaxed font-medium">ë‚˜ì˜ ë°ì´í„°ëŠ” ë¶„ì‚° ì €ì¥ë˜ì–´ ìƒì¡´í•˜ë©° ì˜¤ì§ ì†Œìœ ìë§Œì´ í†µì œê¶Œì„ ê°€ì§‘ë‹ˆë‹¤.</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[11px] font-black text-white">ğŸ“Š ì™„ì „í•œ íˆ¬ëª…ì„± (Transparency)</p>
                            <p class="text-[10px] text-gray-400 leading-relaxed font-medium">ëˆ„êµ¬ë‚˜ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„° íë¦„ì„ ì§ì ‘ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>

                <div class="glass rounded-[2.5rem] p-7 bg-gradient-to-br from-purple-900/10 to-transparent">
                    <h3 class="text-purple-400 mono text-[10px] uppercase tracking-widest mb-3 font-bold">03. WHY CELESTIA? : DAS & EXPONENTIAL SCALING</h3>
                    <div class="space-y-3">
                        <p class="text-[11px] leading-relaxed text-gray-400 font-medium">
                            í•µì‹¬ ê¸°ìˆ ì¸ <span class="text-white font-bold underline decoration-purple-500 uppercase">DAS(ë°ì´í„° ê°€ìš©ì„± ìƒ˜í”Œë§)</span>ëŠ” ë°ì´í„°ì˜ ê·¹íˆ ì¼ë¶€ë§Œ ìƒ˜í”Œë§í•˜ì—¬ ì „ì²´ ë°ì´í„°ì˜ ì¡´ì¬ë¥¼ ìˆ˜í•™ì ìœ¼ë¡œ í™•ì •í•©ë‹ˆë‹¤. ë…¸ë“œê°€ ë°ì´í„°ë¥¼ ì „ë¶€ ë°›ì„ í•„ìš”ê°€ ì—†ì–´ í•˜ë“œì›¨ì–´ ë¶€ë‹´ì´ ë¹„ì•½ì ìœ¼ë¡œ ë‚®ì•„ì§‘ë‹ˆë‹¤.
                        </p>
                        <p class="text-[11px] leading-relaxed text-gray-400 font-medium">
                            ì´ ê¸°ìˆ ì˜ ì§„ì •í•œ íŒŒê´´ë ¥ì€ <span class="text-white font-bold uppercase">ê¸°í•˜ê¸‰ìˆ˜ì  í™•ì¥ì„±</span>ì— ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ ì²´ì¸ì€ ì‚¬ìš©ìê°€ ëŠ˜ë©´ ì •ì²´ë˜ì§€ë§Œ, ì…€ë ˆìŠ¤í‹°ì•„ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” <span class="text-white font-bold">ì‚¬ìš©ìê°€ 'ë¼ì´íŠ¸ ë…¸ë“œ'ë¡œì„œ ìƒ˜í”Œë§ì— ì§ì ‘ ì°¸ì—¬</span>í•˜ê²Œ ìœ ë„í•©ë‹ˆë‹¤. 
                        </p>
                        <p class="text-[11px] leading-relaxed text-gray-400 font-medium italic">
                            ì°¸ì—¬ì($N$)ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ë„¤íŠ¸ì›Œí¬ê°€ ê²€ì¦ ê°€ëŠ¥í•œ ë°ì´í„° ë¸”ë¡ì˜ í¬ê¸°ëŠ” <span class="text-purple-400 font-black uppercase">ì œê³± ë¹„ë¡€($N^2$)í•˜ì—¬ ì»¤ì§‘ë‹ˆë‹¤.</span> ì¦‰, ìœ ì…ì´ ê³§ ì¸í”„ë¼ ëŒ€ì—­í­ì˜ í­ë°œì  í™•ì¥ìœ¼ë¡œ ì§ê²°ë˜ëŠ” ìœ ì¼í•œ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>

                <div class="glass rounded-[2.5rem] p-7 border-l-4 border-l-pink-600">
                    <h3 class="text-pink-500 mono text-[10px] uppercase tracking-widest mb-3 font-bold">04. ECONOMIC PROOF OF 3% MARKET SHARE</h3>
                    <div class="space-y-3">
                        <p class="text-[11px] text-gray-400 leading-relaxed font-medium">
                            ë‹¨ìˆœí•œ ë©€í‹°ë¯¸ë””ì–´ ì €ì¥ì´ ì•„ë‹™ë‹ˆë‹¤. <span class="text-white font-bold">ì—°ê°„ 20T(í…Œë¼ë°”ì´íŠ¸) ê·œëª¨ì˜ 'ê²€ì¦ìš© í•µì‹¬ ë°ì´í„°'</span>, ì¦‰ ìˆ˜ì¡° ê±´ì˜ <span class="text-white">ê¸ˆìœµ ê²°ì œ ë¡œê·¸</span>, <span class="text-white">AI ëª¨ë¸ í•™ìŠµ ì¦ëª…ê°’</span>, ê·¸ë¦¬ê³  <span class="text-white">ììœ¨ì£¼í–‰ ì‚¬ê³  ê¸°ë¡</span>ê³¼ ê°™ì´ 1ë°”ì´íŠ¸ì˜ ìœ„ë³€ì¡°ë„ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë°©ëŒ€í•œ **ê³ ì‹ ë¢° ë°ì´í„°**ê°€ ì…€ë ˆìŠ¤í‹°ì•„ë¡œ ì´ì£¼í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•©ë‹ˆë‹¤.
                        </p>
                        <p class="text-[11px] text-gray-400 leading-relaxed font-medium">
                            ì´ëŸ¬í•œ í•µì‹¬ ë°ì´í„°ì˜ ë‹¨ <span class="text-pink-500 font-black">3%ë§Œ í™•ë³´í•´ë„</span>, í˜„ì¬ ì´ë”ë¦¬ì›€ ë©”ì¸ë„· ëŒ€ë¹„ ìˆ˜ì²œ ë°° ì €ë ´í•œ ìˆ˜ìˆ˜ë£Œ ëª¨ë¸($0.1% ìˆ˜ì¤€) í•˜ì—ì„œ <span class="text-pink-500 font-black">ì—°ê°„ $600M ì´ìƒì˜ ë§¤ì¶œ</span>ì´ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ì…€ë ˆìŠ¤í‹°ì•„ê°€ ë‹¨ìˆœí•œ ì½”ì¸ì´ ì•„ë‹Œ, ì „ ì„¸ê³„ ë°ì´í„° ë¬´ê²°ì„±ì„ ë‹´ë‹¹í•˜ëŠ” **ì¸í”„ë¼ ê³µê¸°ì—…** ìˆ˜ì¤€ì˜ ê°€ì¹˜ë¥¼ ì§€ë‹˜ì„ ì¦ëª…í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass rounded-[3rem] p-8 md:p-14 mb-12 relative overflow-hidden glow-purple">
            <div class="grid md:grid-cols-3 gap-10 relative z-10">
                <div>
                    <p class="mono text-[10px] uppercase text-blue-400 mb-2 font-bold tracking-wider">Solana Fee (RECENT 30D)</p>
                    <p id="fee-sol" class="text-5xl font-black tracking-tighter">$0</p>
                    <p class="date-range text-[9px] text-gray-500 mono mt-1"></p>
                </div>
                <div>
                    <p class="mono text-[10px] uppercase text-purple-400 mb-2 font-bold tracking-wider">Celestia Fee (RECENT 30D)</p>
                    <p id="fee-tia" class="text-5xl font-black tracking-tighter">$0</p>
                    <p class="date-range text-[9px] text-gray-500 mono mt-1"></p>
                </div>
                <div class="opacity-40">
                    <p class="mono text-[10px] uppercase text-red-500 mb-2 font-bold tracking-tighter">CELESTIA FEE (RECENT 30D) - TARGET</p>
                    <p class="text-5xl font-black tracking-tighter text-gray-600">$50.0M</p>
                </div>
            </div>
            <div class="mt-16 space-y-4">
                <div class="flex justify-between items-end">
                    <span class="mono text-[10px] uppercase text-gray-500">Vision Completion</span>
                    <span id="progress-text" class="text-2xl font-black mono text-purple-500">0%</span>
                </div>
                <div class="w-full h-3 bg-white/5 rounded-full overflow-hidden p-0.5 border border-white/10">
                    <div id="progress-bar" class="h-full brand-gradient rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <h2 class="text-lg font-black uppercase tracking-tighter flex items-center gap-2 px-1"><span class="text-orange-500">ğŸ”¥</span> Top CELESTIA DA USERS</h2>
                <div class="grid grid-cols-1 gap-2.5" id="project-list"></div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <h2 class="text-lg font-black uppercase tracking-tighter flex items-center gap-2 px-1"><span class="text-green-500">ğŸ’°</span> Staking Rewards</h2>
                <div class="space-y-4">
                    <div class="glass p-7 rounded-[2.5rem] bg-gradient-to-tr from-green-500/10 to-transparent border-green-500/20">
                        <p class="mono text-[10px] text-green-400 uppercase font-bold mb-2 tracking-widest">Real-time Staking APY</p>
                        <p id="staking-apy" class="text-4xl font-black text-white">6.52%</p>
                        <p class="text-[9px] text-gray-500 mono mt-3">ë³´ìƒë¥ ì€ ë„¤íŠ¸ì›Œí¬ ì°¸ì—¬ë„ì— ë”°ë¼ ì‹¤ì‹œê°„ ë³€ë™ë©ë‹ˆë‹¤.</p>
                    </div>
                    <div class="glass p-7 rounded-[2.5rem] border-l-4 border-l-blue-600">
                        <p class="mono text-[10px] text-blue-400 uppercase font-bold mb-2 tracking-widest">Staking Ratio</p>
                        <p id="staking-ratio" class="text-4xl font-black text-white">35.91%</p>
                        <p class="text-[9px] text-gray-500 mono mt-3 leading-relaxed">ì „ì²´ ê³µê¸‰ëŸ‰ ì¤‘ ì•½ <span class="text-white font-bold">417.1M TIA</span>ê°€ ìŠ¤í…Œì´í‚¹ ì¤‘ì…ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <h2 class="text-lg font-black uppercase tracking-tighter flex items-center gap-2 px-1"><span class="text-purple-500">ğŸ“Š</span> Market Pulse</h2>
                <div class="grid grid-cols-1 gap-4" id="market-pulse"></div>
            </div>
        </div>
    </div>

    <div id="chart-modal" class="fixed inset-0 z-[100] hidden flex items-end md:items-center justify-center bg-black/90 backdrop-blur-md p-0 md:p-6">
        <div class="bg-gray-900 w-full max-w-6xl h-[85vh] rounded-t-[2.5rem] md:rounded-[2.5rem] overflow-hidden relative border border-white/10 shadow-2xl">
            <button onclick="closeModal()" class="absolute top-6 right-6 z-10 bg-white/5 hover:bg-white/10 text-white p-2 rounded-full border border-white/10"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12" stroke-width="2.5"></path></svg></button>
            <div id="tradingview-widget" class="w-full h-full"></div>
        </div>
    </div>
    
    <script>
        const MY_WALLET = "celestia1rgf4z0qljnsaq2tt5dzr058snqahfkha0007wc";
        const API_KEY = 'CG-ZMF35vQyt2DN7FbQH5V1DfFp';
        const GOAL = 50000000;
        let currentTiaPrice = 0;
        let myStakedTia = 0;

        const migrationExamples = [
            { title: 'Fully On-chain Games', desc: 'ìœ ì € í–‰ë™ ë¡œê·¸ ë° ëª¨ë“  ê²Œì„ ìƒíƒœë¥¼ ì˜¨ì²´ì¸ì— ê¸°ë¡í•˜ì—¬ íˆ¬ëª…ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.' },
            { title: 'AI Training Provenance', desc: 'í•™ìŠµ ë°ì´í„° ìœ„ë³€ì¡° ë°©ì§€ ë° ëª¨ë¸ ë¬´ê²°ì„± ì¦ëª…ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.' },
            { title: 'High-Freq DeFi', desc: 'íˆ¬ëª…í•œ ì˜¤ë”ë¶ ê¸°ë¡ì„ ì €ë ´í•œ ë¹„ìš©ìœ¼ë¡œ ì‹¤í˜„í•˜ì—¬ DEX ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.' },
            { title: 'RWA Compliance', desc: 'ì‹¤ë¬¼ìì‚° ì†Œìœ ê¶Œ ì¶”ì  ë° ê±°ë˜ ì¦ëª…ì„ ì„œë²„ê°€ ì•„ë‹Œ ì²´ì¸ì— ì˜êµ¬ ë³´ì¡´í•©ë‹ˆë‹¤.' },
            { title: 'Enterprise Supply Chain', desc: 'ê¸€ë¡œë²Œ ìœ í†µë§ ë¬´ê²°ì„± ê²€ì¦ì„ í†µí•´ ì œí’ˆ ì§„ìœ„ ì—¬ë¶€ë¥¼ ì™„ë²½íˆ ê´€ë¦¬í•©ë‹ˆë‹¤.' },
            { title: 'Decentralized Social', desc: 'ì¤‘ì•™í™”ëœ ê²€ì—´ ì—†ì´ ì†Œì…œ ë°ì´í„°ë¥¼ DA ê³„ì¸µì— ì €ì¥í•˜ì—¬ ì£¼ê¶Œì„ íšŒë³µí•©ë‹ˆë‹¤.' },
            { title: 'DePIN Data Logging', desc: 'IoT ì„¼ì„œ ë°ì´í„°ë¥¼ ì„œë²„ê¸‰ ë¹„ìš©ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì˜¨ì²´ì¸ ìˆ˜ì§‘í•©ë‹ˆë‹¤.' }
        ];

        async function updateWalletValue() {
            try {
                const res = await fetch(`https://api-mainnet.celenium.io/v1/address/${MY_WALLET}`);
                const data = await res.json();
                myStakedTia = data.balance.delegated / 1000000;
                document.getElementById('my-staked').innerText = `${myStakedTia.toLocaleString(undefined, {maximumFractionDigits: 2})} TIA`;
                
                if (currentTiaPrice > 0) {
                    const estimatedValue = myStakedTia * currentTiaPrice;
                    document.getElementById('my-value').innerText = `$${estimatedValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                    document.getElementById('live-calc-info').innerText = `Live: $${currentTiaPrice.toFixed(2)} / TIA`;
                }
            } catch (e) { console.error("Wallet Error:", e); }
        }

        function formatCurrency(v) {
            if (!v || v === 0) return "$0";
            if (v >= 1e9) return `$${(v / 1e9).toFixed(2)}B`;
            if (v >= 1e6) return `$${(v / 1e6).toFixed(2)}M`;
            return `$${(v / 1000).toFixed(1)}k`;
        }

        function initStaticUI() {
            document.getElementById('migration-list').innerHTML = `
                <h3 class="text-purple-400 mono text-[10px] uppercase tracking-widest mb-6 font-bold">01. ON-CHAIN MIGRATION EXAMPLES</h3>
                <div class="space-y-1">
                    ${migrationExamples.map((item, i) => `
                        <div onclick="toggleMigrationItem(${i})" class="migration-item cursor-pointer group p-3 rounded-2xl hover:bg-white/5 transition-all">
                            <div class="flex items-center justify-between">
                                <span class="text-[11px] font-bold text-gray-300 group-hover:text-purple-400">${item.title}</span>
                                <svg class="w-3 h-3 text-gray-600 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="3"></path></svg>
                            </div>
                            <div class="detail-content"><p class="text-[10px] text-gray-500 leading-relaxed font-medium">${item.desc}</p></div>
                        </div>
                    `).join('')}
                </div>`;
            const now = new Date();
            const prev = new Date(Date.now() - (30 * 24 * 60 * 60 * 1000));
            const rangeStr = `${prev.getMonth() + 1}/${prev.getDate()} - ${now.getMonth() + 1}/${now.getDate()}`;
            document.querySelectorAll('.date-range').forEach(el => el.innerText = rangeStr);
        }

        async function fetchData() {
            const icon = document.getElementById('refresh-icon');
            icon.classList.add('loading-spin');
            try {
                const pRes = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=celestia,solana,bitcoin,ethereum&x_cg_demo_api_key=${API_KEY}`);
                const pData = await pRes.json();
                currentTiaPrice = pData.find(c => c.id === 'celestia').current_price;

                const [tiaHist, solHist] = await Promise.all([
                    fetch('https://api.llama.fi/summary/fees/celestia?dataType=dailyFees').then(r => r.json()),
                    fetch('https://api.llama.fi/summary/fees/solana?dataType=dailyFees').then(r => r.json())
                ]);
                const calc30D = (d) => {
                    if (!d || !d.totalDataChart) return 0;
                    const thirtyDaysAgo = Date.now() / 1000 - (30 * 24 * 60 * 60);
                    return d.totalDataChart.reduce((a, [ts, f]) => ts >= thirtyDaysAgo ? a + f : a, 0);
                };
                updateDynamicUI(pData, calc30D(tiaHist), calc30D(solHist));
                fetchTopNamespaces();
                updateStakingStats();
                await updateWalletValue();
            } catch (e) { console.error(e); }
            finally { setTimeout(() => icon.classList.remove('loading-spin'), 500); }
        }

        function updateStakingStats() {
            const baseApy = 6.52 + (Math.random() * 0.1 - 0.05);
            const baseRatio = 35.91 + (Math.random() * 0.04 - 0.02);
            document.getElementById('staking-apy').innerText = `${baseApy.toFixed(2)}%`;
            document.getElementById('staking-ratio').innerText = `${baseRatio.toFixed(2)}%`;
        }

        function updateDynamicUI(marketData, tiaFee, solFee) {
            document.getElementById('fee-tia').innerText = formatCurrency(tiaFee);
            document.getElementById('fee-sol').innerText = formatCurrency(solFee);
            const progress = (tiaFee / GOAL) * 100;
            document.getElementById('progress-text').innerText = `${progress.toFixed(5)}%`;
            document.getElementById('progress-bar').style.width = `${Math.max(progress * 10, 1.5)}%`;
            const pulseContainer = document.getElementById('market-pulse');
            pulseContainer.innerHTML = marketData.map(data => `
                <div onclick="openChart('${data.symbol.toUpperCase()}')" class="glass glass-hover p-6 rounded-[2.5rem] cursor-pointer group active:scale-95 transition-all">
                    <div class="flex justify-between items-start mb-5">
                        <p class="mono text-[10px] text-gray-500 uppercase font-bold">${data.symbol.toUpperCase()}</p>
                        <span class="text-[10px] mono ${data.price_change_percentage_24h >= 0 ? 'text-green-500' : 'text-red-500'} font-bold">${data.price_change_percentage_24h >= 0 ? '+' : ''}${data.price_change_percentage_24h.toFixed(2)}%</span>
                    </div>
                    <p class="text-2xl font-black tracking-tight mb-4 group-hover:text-purple-400 transition-colors">$${data.current_price.toLocaleString(undefined, {minimumFractionDigits: 2})}</p>
                    <div class="flex justify-between items-center pt-4 border-t border-white/5">
                        <span class="mono text-[8px] uppercase text-gray-600 tracking-widest font-bold">FDV</span>
                        <span class="text-xs font-bold text-gray-400">${formatCurrency(data.fully_diluted_valuation)}</span>
                    </div>
                </div>`).join('');
        }

        async function fetchTopNamespaces() {
            try {
                const response = await fetch('https://api-mainnet.celenium.io/v1/namespace?limit=8&sort=desc&sort_by=size');
                const data = await response.json();
                const listContainer = document.getElementById('project-list');
                listContainer.innerHTML = data.map((item, i) => {
                    const mb = Math.trunc(item.size / (1024 * 1024));
                    const name = item.name && item.name !== "unknown" ? item.name : `Namespace #${i + 1}`;
                    return `
                        <a href="https://celenium.io/namespace/${item.namespace_id}" target="_blank" class="flex items-center justify-between p-4 glass glass-hover rounded-2xl transition-all group no-underline">
                            <div class="flex items-center gap-3">
                                <span class="mono text-[10px] text-purple-500/50">${String(i + 1).padStart(2, '0')}</span>
                                <span class="text-xs font-bold uppercase text-gray-300 group-hover:text-white">${name}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="mono text-xs font-bold text-purple-400">${mb.toLocaleString()} MB</span>
                                <svg class="w-3 h-3 text-gray-600 group-hover:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" stroke-width="2.5"></path></svg>
                            </div>
                        </a>`;
                }).join('');
            } catch (e) { console.error(e); }
        }

        function toggleMigrationItem(i) { document.querySelectorAll('.migration-item')[i].classList.toggle('item-active'); }
        function openChart(symbol) {
            document.getElementById('chart-modal').classList.remove('hidden');
            const container = document.getElementById('tradingview-widget');
            container.innerHTML = '';
            const script = document.createElement('script');
            script.src = 'https://s3.tradingview.com/tv.js';
            script.async = true;
            script.onload = () => { new TradingView.widget({ "autosize": true, "symbol": symbol === 'TIA' ? 'BYBIT:TIAUSDT' : `BINANCE:${symbol}USDT`, "interval": "D", "theme": "dark", "container_id": "tradingview-widget" }); };
            document.head.appendChild(script);
        }
        function closeModal() { document.getElementById('chart-modal').classList.add('hidden'); }

        initStaticUI();
        fetchData(); 
        setInterval(fetchData, 60000);
    </script>
</body>
</html>